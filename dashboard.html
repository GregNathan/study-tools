<!DOCTYPE html>
<html lang="en">
<head>
    <script>
  if (!sessionStorage.getItem("authUser")) {
    window.location.replace("login.html");
  }
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/logo.png" type="image/png">
    <title>Focus Dashboard</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <header>
        <img src="img/logo.png" alt="Student Tools Hub Logo" class="logo">
        <h1>Focus Dashboard</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="dashboard.html">Focus Dashboard</a>
            <a href="formulas.html">Formula Sheet</a>
            <a href="learner-materials.html">Modules</a>
        </nav>
        <button id="theme-toggle">ğŸŒ™</button>
    </header>
    <main>
        <div class="dashboard-header fade-in">
            <h2>ğŸ“Š Study Dashboard</h2>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="streak-count">0</span>
                    <span class="stat-label">Day Streak</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="total-sessions">0</span>
                    <span class="stat-label">Total Sessions</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="total-time">0</span>
                    <span class="stat-label">Hours Studied</span>
                </div>
            </div>
        </div>
        <section id="pomodoro" class="slide-in">
            <h2>ğŸ… Pomodoro Timer</h2>
            <div class="circular-progress">
                <svg>
                    <circle class="circle-bg" cx="75" cy="75" r="62.5"></circle>
                    <circle class="circle-progress" cx="75" cy="75" r="62.5" id="timer-circle"></circle>
                </svg>
                <div class="timer-text">
                    <div id="timer-display">25:00</div>
                    <div id="timer-status">Ready to study!</div>
                </div>
            </div>
            <div class="timer-controls">
                <button id="decrease-time" class="tooltip" title="Decrease by 5 minutes">-5 min</button>
                <button id="start-pause">Start</button>
                <button id="reset">Reset</button>
                <button id="increase-time" class="tooltip" title="Increase by 5 minutes">+5 min</button>
            </div>
        </section>
        <section id="todo" class="slide-in">
            <h2>ğŸ“ To-Do List</h2>
            <div class="todo-input-group">
                <input type="text" id="todo-input" placeholder="Add a new task...">
                <button id="add-todo">Add Task</button>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="todo-progress"></div>
            </div>
            <p id="todo-stats">0 / 0 tasks completed</p>
            <ul id="todo-list"></ul>
        </section>
        <section id="sounds" class="slide-in">
            <h2>ğŸµ Study Music</h2>
            <div id="sound-player">
                <select id="sound-select">
                    <option value="6zCID88oNjNv9zx6puDHKj">Lofi Hip Hop Study</option>
                    <option value="7mvKXVmFMOReJOEsf64Jpy">Piano Classics Study</option>
                    <option value="37i9dQZF1DWWb1L5n1gkOJ">Ambient Study Music</option>
                </select>
                <div style="margin: 0.75rem 0;">
                    <iframe id="spotify-player" data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/playlist/6zCID88oNjNv9zx6puDHKj?utm_source=generator&theme=0" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                </div>
                <div id="player-status" style="font-size: 0.8em; color: var(--text-color); opacity: 0.7; margin-bottom: 0.5rem;">Spotify Player Ready</div>
                <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
                    <button id="play-pause">Play on Spotify</button>
                    <input type="range" id="volume" min="0" max="100" value="50" style="flex: 1; min-width: 150px;">
                    <button id="test-change" style="font-size: 0.9rem;">Test</button>
                </div>
            </div>
        </section>
        <section id="quote" class="slide-in">
            <h2>ğŸ’¡ Motivational Quote</h2>
            <p id="quote-text"></p>
            <button id="new-quote">Get New Quote</button>
        </section>
        <section id="achievements" class="slide-in">
            <h2>ğŸ† Achievements</h2>
            <button id="view-achievements">View Achievements</button>
        </section>
    </main>

    <!-- Achievement Modal -->
    <div id="achievement-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>ğŸ† Your Achievements</h2>
            <div id="achievement-list">
                <p id="no-achievements">Complete study sessions to unlock achievements!</p>
            </div>
        </div>
    </div>
    <script src="js/common.js"></script>

    <script src="js/dashboard.js"></script>
